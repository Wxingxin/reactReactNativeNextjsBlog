è¿™æ®µä»£ç **æœ¬èº«æ˜¯é”™è¯¯çš„**ï¼Œä½†ä½ é—®çš„é—®é¢˜**éå¸¸å¥½ï¼Œè€Œä¸”æ˜¯â€œHook + é—­åŒ… + åˆå§‹åŒ–â€çš„æ ¸å¿ƒé—®é¢˜**ã€‚
æˆ‘ä¼šå…ˆ**æŒ‡å‡ºé”™è¯¯ï¼ˆä¸ç»•å¼¯ï¼‰**ï¼Œå†**å›ç­”ä½ çœŸæ­£æƒ³é—®çš„ï¼š`useState` åˆå§‹å€¼æ¥è‡ªå“ªé‡Œæœ‰ä»€ä¹ˆåŒºåˆ«**ã€‚

---

## ä¸€ã€å…ˆæŠŠè¿™æ®µä»£ç â€œåˆ¤æ­»åˆ‘â€ï¼ˆé‡è¦ï¼‰

```js
const handleClick = () => {
  let countOne = 0;
  const [count, setCount] = useState(countOne); // âŒ
};
```

### âŒ è‡´å‘½é”™è¯¯ï¼ˆå¿…é¡»è®°ä½ï¼‰

> **Hook åªèƒ½åœ¨ç»„ä»¶å‡½æ•°æœ€å¤–å±‚è°ƒç”¨ï¼Œä¸èƒ½åœ¨äº‹ä»¶å‡½æ•°é‡Œè°ƒç”¨**

æ‰€ä»¥ï¼š

- `handleClick` é‡Œ âŒ
- `if / for / while` é‡Œ âŒ
- æ™®é€šå‡½æ•°é‡Œ âŒ

ğŸ‘‰ è¿™æ®µä»£ç  **React ä¼šç›´æ¥æŠ¥ Invalid hook call**

---

## äºŒã€ä½†ä½ çœŸæ­£æƒ³é—®çš„æ˜¯è¿™ä¸ªï¼ˆæˆ‘æ‹†ç»™ä½ ï¼‰

> **`useState(åˆå§‹å€¼)`
> åˆå§‹å€¼æ˜¯ï¼š**
>
> - å½“å‰å‡½æ•°é‡Œçš„å˜é‡ï¼Ÿ
> - å¤–éƒ¨å˜é‡ï¼Ÿ
> - åŸºæœ¬ç±»å‹ï¼Ÿ
> - å¯¹è±¡ç±»å‹ï¼Ÿ
>
> **å®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ**

è¿™ä¸ªé—®é¢˜**éå¸¸ä¸“ä¸š**ï¼Œä¸‹é¢æ˜¯é‡ç‚¹ã€‚

---

## ä¸‰ã€useState åˆå§‹å€¼çš„â€œæœ¬è´¨è§„åˆ™â€ï¼ˆä¸€å¥è¯ï¼‰

> **`useState(initialValue)` é‡Œçš„å€¼ï¼Œåªåœ¨ã€Œç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“ã€æ—¶ä½¿ç”¨ä¸€æ¬¡**

âš ï¸ åé¢æ— è®ºè¿™ä¸ªå€¼æ€ä¹ˆå˜ï¼Œ**React éƒ½ä¸ä¼šå†ç”¨å®ƒ**

---

## å››ã€æƒ…å†µä¸€ï¼šåˆå§‹å€¼æ¥è‡ªâ€œç»„ä»¶å‡½æ•°å†…éƒ¨å˜é‡â€

### âœ… åˆæ³•å†™æ³•

```jsx
export default function Contact() {
  let countOne = 0;
  const [count, setCount] = useState(countOne);

  return <div>{count}</div>;
}
```

### è¡Œä¸ºï¼š

- é¦–æ¬¡ renderï¼š`count = 0`
- ä¹‹å renderï¼š
  - `countOne` æ¯æ¬¡éƒ½ä¼šé‡æ–°å˜æˆ `0`
  - **ä½† `useState` å®Œå…¨å¿½ç•¥å®ƒ**

ğŸ‘‰ **state ä¸ä¼šé‡ç½®**

---

## äº”ã€æƒ…å†µäºŒï¼šåˆå§‹å€¼æ¥è‡ªâ€œç»„ä»¶å¤–éƒ¨å˜é‡â€

```js
let countTwoer = 0;

export default function Contact() {
  const [count, setCount] = useState(countTwoer);
}
```

### è¡Œä¸ºï¼š

- é¦–æ¬¡ renderï¼š`count = countTwoer`
- ä¹‹åï¼š
  - å³ä½¿ `countTwoer` æ”¹äº†
  - **state ä¹Ÿä¸ä¼šè·Ÿç€å˜**

âš ï¸ **React ä¸ä¼šâ€œç›‘å¬â€è¿™ä¸ªå˜é‡**

---

## å…­ã€å…³é”®ç»“è®ºï¼ˆå¾ˆå¤šäººè¯¯è§£ï¼‰

> **useState çš„åˆå§‹å€¼ â‰  å“åº”å¼æ•°æ®æº**

å®ƒåªæ˜¯ï¼š

```txt
ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶ç”¨ä¸€ä¸‹
ç„¶åå°±ä¸¢äº†
```

---

## ä¸ƒã€åŸºæœ¬ç±»å‹ vs å¯¹è±¡ç±»å‹ï¼ˆè¿™æ˜¯é‡ç‚¹ï¼‰

### 1ï¸âƒ£ åŸºæœ¬ç±»å‹ï¼ˆnumber / string / booleanï¼‰

```js
useState(0);
useState("hello");
useState(false);
```

- å­˜çš„æ˜¯ **å€¼çš„æ‹·è´**
- æ›´æ–°å¿…é¡»ç”¨ `setState`

---

### 2ï¸âƒ£ å¯¹è±¡ / æ•°ç»„ï¼ˆå¼•ç”¨ç±»å‹ï¼‰

```js
useState({ count: 0 });
useState([1, 2, 3]);
```

å­˜çš„æ˜¯ **å¼•ç”¨**

âš ï¸ é‡ç‚¹æ¥äº†ï¼š

```js
const [obj, setObj] = useState({ count: 0 });

obj.count = 1; // âŒ ä¸ä¼šè§¦å‘æ›´æ–°
```

å¿…é¡»ï¼š

```js
setObj({ ...obj, count: 1 }); // âœ…
```

---

## å…«ã€å¤–éƒ¨å¯¹è±¡ä½œä¸ºåˆå§‹å€¼çš„â€œå‘â€

```js
const initialState = { count: 0 };

function Contact() {
  const [state, setState] = useState(initialState);
}
```

### é—®é¢˜åœ¨è¿™ï¼š

- `initialState` æ˜¯ **åŒä¸€ä¸ªå¯¹è±¡**
- å¤šä¸ªç»„ä»¶å¯èƒ½å…±äº«å¼•ç”¨
- âŒ å®¹æ˜“äº§ç”Ÿâ€œå¹½çµæ›´æ–°â€

### æ­£ç¡®åšæ³•ï¼ˆèŒä¸šçº§ï¼‰

```js
useState(() => ({ count: 0 }));
```

---

## ä¹ã€å‡½æ•°ä½œä¸ºåˆå§‹å€¼ï¼ˆé«˜çº§ä½†é‡è¦ï¼‰

```js
useState(() => {
  console.log("åªæ‰§è¡Œä¸€æ¬¡");
  return heavyCompute();
});
```

ğŸ‘‰ **è¿™ä¸ªå‡½æ•°åªåœ¨é¦–æ¬¡æ¸²æŸ“æ—¶æ‰§è¡Œä¸€æ¬¡**

é€‚ç”¨äºï¼š

- å¤§å¯¹è±¡
- å¤§æ•°ç»„
- è®¡ç®—æˆæœ¬é«˜çš„åˆå§‹åŒ–

---

## åã€æŠŠä½ é—®é¢˜æ€»ç»“æˆä¸€å¼ è¡¨ï¼ˆæ”¶è—çº§ï¼‰

| åˆå§‹å€¼æ¥æº   | æ˜¯å¦å½±å“åç»­ state | æ˜¯å¦å“åº”å˜åŒ– |
| ------------ | ------------------ | ------------ |
| å‡½æ•°å†…éƒ¨å˜é‡ | âŒ                 | âŒ           |
| ç»„ä»¶å¤–å˜é‡   | âŒ                 | âŒ           |
| åŸºæœ¬ç±»å‹     | å€¼æ‹·è´             | âŒ           |
| å¯¹è±¡ / æ•°ç»„  | å¼•ç”¨               | âŒ           |
| å‡½æ•°è¿”å›å€¼   | ä»…é¦–æ¬¡æ‰§è¡Œ         | âŒ           |

ğŸ‘‰ **åªæœ‰ `setState` èƒ½æ”¹å˜ state**

---

## åä¸€ã€ä½ ç°åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘ç»™ä½ ä¸€å¥â€œé“å¾‹â€

> **useState çš„å‚æ•°åªæ˜¯â€œåˆå§‹å¿«ç…§â€ï¼Œä¸æ˜¯æ•°æ®æº**

---

## åäºŒã€å¦‚æœä½ æ„¿æ„ä¸‹ä¸€æ­¥æ·±å…¥ï¼ˆå¾ˆé€‚åˆä½ ï¼‰

ä½ å·²ç»åœ¨é—®**90% åˆå­¦è€…é—®ä¸åˆ°çš„é—®é¢˜**äº†ï¼Œæˆ‘å»ºè®®ä½ ä¸‹ä¸€æ­¥å­¦ï¼š

1ï¸âƒ£ **ä¸ºä»€ä¹ˆ props å˜äº†ï¼Œstate ä¸ä¼šè‡ªåŠ¨å˜**
2ï¸âƒ£ **ä¸ºä»€ä¹ˆä¸èƒ½ç”¨ state æ´¾ç”Ÿ state**
3ï¸âƒ£ **ä»€ä¹ˆæ—¶å€™è¯¥ç”¨ `useEffect` åŒæ­¥ state**

æˆ‘å¯ä»¥ç”¨**çœŸå®è¸©å‘æ¡ˆä¾‹**ç»™ä½ è®²ï¼Œä¸è®²æŠ½è±¡ç†è®ºã€‚
ä½ é€‰ä¸€ä¸ªç»§ç»­ã€‚

```jsx
export default function Contact() {
  const items = [
    { id: 1, name: "item 1" },
    { id: 2, name: "item 2" },
    { id: 3, name: "item 3" },
  ];

  const [itemList, setItemList] = useState(items);

  const handleClick = () => {
    setItemList((pre) => {
      return [...pre, { id: pre.length + 1, name: `item ${pre.length + 1}` }];
    });
  };
  return (
    <div>
      <button onClick={handleClick}>Add Item</button>
      <h1>Contact Page</h1>
      <ul>
        {itemList.map((item) => (
          <li key={item.id}>{item.name}</li>
        ))}
      </ul>
    </div>
  );
}
```

#
