```jsx

export default function Contact() {
  console.log(useState(1));
  const value = useState("hello")[0];
  const func = useState("hello")[1];
  console.log(value);
  console.log(func);

  const [count, setCount] = useState(0);

  const handleClick = () => {
    setCount(count + 1);
    setCount((pre) => pre + 1);
  };
  return (
    <div>
      <h4>you clicked {count} times</h4>
      <button onClick={handleClick}>click me</button>
    </div>
  );
}
```

è¿™ä¸ªé—®é¢˜é—®å¾—**éå¸¸å¥½**ï¼Œè€Œä¸”ä½ è¿™ä¸¤ä¸ªå†™æ³•**æœ¬è´¨ä¸Šæš´éœ²äº† React Hooks çš„ä¸¤ä¸ªæ ¸å¿ƒè§„åˆ™**ï¼š
ğŸ‘‰ **Hook çš„ä½œç”¨åŸŸ**
ğŸ‘‰ **state æ›´æ–°çš„æ—¶æœº & é—­åŒ…**

æˆ‘ç›´æ¥ç»™ä½ ç»“è®ºï¼Œç„¶åæ‹†å¼€è®²ã€‚

---

## ä¸€ã€å…ˆç»™ç»“è®ºï¼ˆå¾ˆé‡è¦ï¼‰

> **ç¬¬ä¸€ä¸ªæ˜¯æ­£ç¡®çš„ React ç»„ä»¶å†™æ³•**
> **ç¬¬äºŒä¸ªæ˜¯é”™è¯¯çš„ï¼ŒReact ä¼šç›´æ¥æŠ¥é”™ï¼Œé€»è¾‘ä¸Šä¹Ÿä¸æˆç«‹**

è€Œä¸”ä¸æ˜¯â€œæ¨èä¸æ¨èâ€çš„é—®é¢˜ï¼Œæ˜¯**è¯­ä¹‰ä¸Šå°±é”™äº†**ã€‚

---

## äºŒã€ä¸ºä»€ä¹ˆç¬¬ä¸€ä¸ªæ˜¯å¯¹çš„ï¼Ÿ

### âœ… æ­£ç¡®å†™æ³•ï¼ˆä½ çš„ç¬¬ä¸€ä¸ªï¼‰

```jsx
export default function Contact() {
  const [count, setCount] = useState(0);

  const handleClick = () => {
    setCount(count + 1);
    setCount((pre) => pre + 1);
  };

  return (
    <div>
      <h4>you clicked {count} times</h4>
      <button onClick={handleClick}>click me</button>
    </div>
  );
}
```

### è¿™é‡Œå‘ç”Ÿäº† 3 ä»¶å…³é”®çš„äº‹æƒ…

#### 1ï¸âƒ£ `useState` åœ¨ç»„ä»¶å‡½æ•°é‡Œï¼ˆåˆæ³•ï¼‰

```js
function Contact() {
  useState(...)
}
```

âœ… React **æ¯æ¬¡ render éƒ½ä¼šæ‰§è¡Œ Contact**
âœ… Hook è°ƒç”¨é¡ºåºç¨³å®š
âœ… React èƒ½æ­£ç¡®ç®¡ç† state

---

#### 2ï¸âƒ£ `handleClick` åœ¨ç»„ä»¶ä½œç”¨åŸŸå†…

```js
const handleClick = () => {
  ...
};
```

* èƒ½è®¿é—® `count`
* èƒ½è®¿é—® `setCount`
* é—­åŒ…å®‰å…¨

---

#### 3ï¸âƒ£ è¿ç»­ä¸¤æ¬¡ `setCount` çš„çœŸå®ç»“æœ

```js
setCount(count + 1);      // ç”¨çš„æ˜¯â€œæ—§ countâ€
setCount((pre) => pre + 1); // ç”¨çš„æ˜¯â€œæœ€æ–° stateâ€
```

å‡è®¾ç‚¹å‡»å‰ï¼š

```txt
count = 0
```

æ‰§è¡Œé¡ºåºï¼š

1ï¸âƒ£ `setCount(count + 1)` â†’ è®¡åˆ’è®¾ä¸º `1`
2ï¸âƒ£ `setCount(pre => pre + 1)` â†’ åœ¨ä¸Šä¸€æ­¥åŸºç¡€ä¸Šå† +1

âœ… **æœ€ç»ˆç»“æœï¼š+2**

---

## ä¸‰ã€ä¸ºä»€ä¹ˆç¬¬äºŒä¸ªæ˜¯é”™çš„ï¼ˆè€Œä¸”æ˜¯â€œåŸåˆ™çº§é”™è¯¯â€ï¼‰ï¼Ÿ

### âŒ ä½ çš„ç¬¬äºŒä¸ªå†™æ³•

```jsx
const [count, setCount] = useState(0);

const handleClick = () => {
  setCount(count + 1);
  setCount((pre) => pre + 1);
};

export default function Contact() {
  return (
    <div>
      <h4>you clicked {count} times</h4>
      <button onClick={handleClick}>click me</button>
    </div>
  );
}
```

### è¿™é‡Œ **è‡³å°‘æœ‰ 3 ä¸ªè‡´å‘½é—®é¢˜**

---

### âŒ é—®é¢˜ 1ï¼šHook ä¸èƒ½åœ¨ç»„ä»¶å¤–è°ƒç”¨

```js
const [count, setCount] = useState(0);
```

è¿™æ˜¯åœ¨ **æ¨¡å—é¡¶å±‚**ï¼Œä¸æ˜¯ç»„ä»¶å‡½æ•°é‡Œã€‚

React ä¼šç›´æ¥æŠ¥é”™ï¼š

```txt
Invalid hook call. Hooks can only be called inside of the body of a function component
```

ğŸ‘‰ **è¿™æ˜¯ç¡¬è§„åˆ™ï¼Œä¸æ˜¯å»ºè®®**

---

### âŒ é—®é¢˜ 2ï¼šReact ä¸çŸ¥é“â€œè°åœ¨ç”¨è¿™ä¸ª stateâ€

React çš„æ¨¡å‹æ˜¯ï¼š

```txt
æ¯ä¸ªç»„ä»¶å®ä¾‹
â†’ æœ‰è‡ªå·±çš„ä¸€å¥— hooks
```

è€Œä½ è¿™æ ·å†™ç­‰äºï¼š

```txt
æ‰€æœ‰ç»„ä»¶å…±äº«ä¸€ä¸ª count
```

è¿™ **ç›´æ¥ç ´åäº† React çš„ç»„ä»¶æ¨¡å‹**

---

### âŒ é—®é¢˜ 3ï¼šhandleClick æ•è·çš„æ˜¯â€œæ¨¡å—çº§é—­åŒ…â€

```js
const handleClick = () => {
  setCount(count + 1);
};
```

å³ä½¿ React ä¸æŠ¥é”™ï¼ˆç°å®ä¸­ä¼šï¼‰ï¼Œä½ æ‹¿åˆ°çš„ `count` ä¹Ÿä¼šæ˜¯ï¼š

* åˆå§‹åŒ–é‚£ä¸€åˆ»çš„å€¼
* **æ°¸è¿œä¸ä¼šæ›´æ–°**

è¿™æ˜¯å…¸å‹çš„ **é—­åŒ…é™ˆæ—§å€¼é—®é¢˜**

---

## å››ã€é¡ºä¾¿è¯´ä¸€ä¸ªä½ è¿™ä¸ªä¾‹å­é‡Œçš„â€œéšè—é‡ç‚¹â€ï¼ˆéå¸¸é‡è¦ï¼‰

### ä¸ºä»€ä¹ˆæ¨èè¿™ç§å†™æ³•ğŸ‘‡

```js
setCount((prev) => prev + 1);
```

è€Œä¸æ˜¯ï¼š

```js
setCount(count + 1);
```

### åŸå› åªæœ‰ä¸€å¥è¯ï¼š

> **å‡½æ•°å¼æ›´æ–°ä¸ä¼šåƒé—­åŒ…çš„æ—§å€¼**

åœ¨ä¸‹é¢è¿™äº›åœºæ™¯ä¸­æ˜¯å¿…é¡»çš„ï¼š

* è¿ç»­ setState
* setTimeout / Promise
* äº‹ä»¶å›è°ƒ
* å¹¶å‘æ¸²æŸ“ï¼ˆReact 18ï¼‰

ğŸ‘‰ **èŒä¸šçº§å†™æ³•ï¼šæ°¸è¿œä¼˜å…ˆç”¨å‡½æ•°å¼æ›´æ–°**

---

## äº”ã€æŠŠä¸¤æ®µä»£ç â€œæŠ½è±¡æˆä¸€å¥è¯å¯¹æ¯”â€

| å¯¹æ¯”ç‚¹      | ç¬¬ä¸€æ®µ    | ç¬¬äºŒæ®µ    |
| -------- | ------ | ------ |
| Hook ä½ç½®  | ç»„ä»¶å‡½æ•°å†…  | âŒ æ¨¡å—é¡¶å±‚ |
| React è§„åˆ™ | âœ… åˆæ³•   | âŒ ç›´æ¥æŠ¥é”™ |
| state å½’å± | æ¯ä¸ªç»„ä»¶å®ä¾‹ | âŒ æ— æ³•å½’å± |
| é—­åŒ…å®‰å…¨     | âœ…      | âŒ      |
| å®é™…å¯è¿è¡Œ    | âœ…      | âŒ      |

---

## å…­ã€ä½ ç°åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘ç»™ä½ çš„**ç¡¬æ€§å»ºè®®**

> **æ‰€æœ‰ Hookï¼š**
> 1ï¸âƒ£ å¿…é¡»å†™åœ¨ç»„ä»¶å‡½æ•°é‡Œ
> 2ï¸âƒ£ å¿…é¡»å†™åœ¨æœ€å¤–å±‚
> 3ï¸âƒ£ state æ›´æ–°ä¼˜å…ˆç”¨ `(prev) => ...`

ä½ å·²ç»å¼€å§‹é—®è¿™ç§â€œä½œç”¨åŸŸ + é—­åŒ… + Hookâ€çš„é—®é¢˜äº†ï¼Œè¯´æ˜ä½ **çœŸçš„åœ¨ç†è§£ Reactï¼Œè€Œä¸æ˜¯èƒŒ API** ğŸ‘

å¦‚æœä½ æ„¿æ„ï¼Œä¸‹ä¸€æ­¥æˆ‘å¯ä»¥ï¼š

* ç”¨ **React 18 æ‰¹é‡æ›´æ–°æœºåˆ¶**æŠŠä½ è¿™ä¸ª `+2` çš„è¡Œä¸ºå½»åº•è®²é€
* æˆ–è€…ç”¨ **é”™è¯¯ç¤ºä¾‹åˆé›†**å¸®ä½ å½¢æˆâ€œæ¡ä»¶åå°„çº§åˆ«â€çš„åˆ¤æ–­èƒ½åŠ›

ä½ é€‰ä¸€ä¸ªã€‚
